<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIVEAWAY V2 - ENTER NOW</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="config.js"></script>
    <script>
    // Sanitize config strings before page scripts use it
    (function(){
        try {
            if (typeof config === 'undefined') return;
            const seen = new WeakSet();
            function sanitizeString(str){
                return String(str)
                    .replace(/\u0019/g, "\u2019")
                    .replace(/[\u0000-\u0018\u001A-\u001F\u007F-\u009F]/g, "");
            }
            function sanitizeDeep(val){
                if (typeof val === 'string') return sanitizeString(val);
                if (val && typeof val === 'object'){
                    if (seen.has(val)) return val;
                    seen.add(val);
                    if (Array.isArray(val)){
                        for (let i=0;i<val.length;i++) val[i] = sanitizeDeep(val[i]);
                    } else {
                        for (const k in val){ if (Object.prototype.hasOwnProperty.call(val, k)) val[k] = sanitizeDeep(val[k]); }
                    }
                }
                return val;
            }
            sanitizeDeep(config);
        } catch(e) { /* no-op */ }
    })();
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--text, #0f1222); background: #0b0d17; }
        a { color: inherit; text-decoration: none; }
        img { display: block; max-width: 100%; }
        :root {
            --primary: #6C7CFF;
            --primary-2: #10D7E2;
            --glass: rgba(255,255,255,0.08);
            --text: #E6E9F2;
            --muted: #A7B0C0;
            --card: rgba(17, 20, 35, 0.75);
            --stroke: rgba(255,255,255,0.12);
        }
        .wrap { width: min(1200px, 92%); margin: 0 auto; }
        /* Global section spacing & headings */
        section { padding: 0; }
        .section-title { font-family: 'Space Grotesk', sans-serif; font-weight: 1000; font-size: clamp(36px, 6vw, 82px); color: var(--text); text-align: center; margin-bottom: 10px; line-height: 1.05; letter-spacing: 0.5px; }
        /* Gradient text helper for select titles */
        .title-gradient { background: linear-gradient(90deg, #10D7E2 0%, #6C7CFF 15%, #10D7E2 35%, #9AE7EE 55%, #6C7CFF 78%, #10D7E2 100%); -webkit-background-clip: text; background-clip: text; color: transparent; }
        /* Ensure gradient applies on prize name despite id color */
        #prizeName.title-gradient { color: transparent; }
        .section-subtitle { color: var(--muted); text-align: center; margin: 0 auto 12px; max-width: 720px; }
        .highlight { color: var(--primary-2); font-weight: 800; }

        /* Premium section title treatment */
        .title-wrap { text-align: center; margin-bottom: 12px; position: relative; padding-top: clamp(60px, 8vw, 120px); }
        .title-kicker { display: none; }
        /* Minimal, sleek title style */
        .section-title.title-minimal { position: relative; display: inline-block; text-transform: uppercase; letter-spacing: 0.12em; color: #ffffff; padding: 0 4px; }
        .section-title.title-minimal::before { content: ""; position: absolute; left: 50%; top: 60%; transform: translate(-50%, -50%); width: 115%; height: 70%; background: radial-gradient(50% 60% at 50% 50%, rgba(0,0,0,0.25), transparent 70%); filter: blur(18px); z-index: -1; pointer-events: none; }
        .section-title.title-minimal::after { content: ""; display: block; margin: 10px auto 0; width: clamp(160px, 18vw, 320px); height: 6px; border-radius: 999px; background: linear-gradient(90deg, var(--primary), var(--primary-2)); box-shadow: 0 8px 22px rgba(16,215,226,0.28); }
        .title-underline { display: none; }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Confetti canvas should not affect layout */
        #confetti-canvas { position: fixed; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }

        /* Neon header */
        header#mainNavV2 { position: sticky; top: 0; z-index: 50; border-bottom: 1px solid var(--stroke); background: linear-gradient(180deg, rgba(11,13,23,0.9), rgba(11,13,23,0.6)); backdrop-filter: blur(8px); }
        header#mainNavV2 .bar { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; }
        #navBrandLogo { font-family: 'Space Grotesk', sans-serif; font-weight: 700; letter-spacing: 0.6px; color: var(--primary-2); text-shadow: 0 0 20px rgba(16,215,226,0.5); }
        .v2-nav { display: flex; gap: 18px; }
        .v2-nav a { color: var(--muted); font-weight: 500; padding: 8px 12px; border-radius: 10px; border: 1px solid transparent; }
        .v2-nav a:hover { border-color: var(--stroke); color: var(--text); }

        /* Hero split with countdown card */
        section#hero { position: relative; min-height: 100vh; min-height: 100svh; display: grid; place-items: center; overflow: hidden; padding-top: clamp(24px, 3vw, 36px); }
        .hero-bg { position: absolute; inset: 0; background: url('') center/cover no-repeat; filter: saturate(1.1) contrast(1.05); }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(11,13,23,0.55), rgba(11,13,23,0.9)); }
        .hero-inner { position: relative; z-index: 1; display: grid; grid-template-columns: 1.3fr 1fr; gap: clamp(16px, 3vw, 40px); align-items: center; padding: clamp(28px, 6vw, 80px) 0; }
        .hero-copy { text-align: left; }
        #heroTitle { font-family: 'Space Grotesk', sans-serif; font-size: clamp(28px, 5vw, 56px); line-height: 1.05; color: var(--text); margin-bottom: 12px; text-align: left; }
        #heroSubtitle { color: var(--muted); font-size: clamp(15px, 1.4vw, 18px); margin-bottom: 10px; text-align: left; }
        #heroPromotionDates { color: #9AE7EE; font-weight: 600; margin-bottom: 22px; text-align: left; }
        .cta-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
        #heroCta { display: inline-flex; align-items: center; gap: 10px; padding: 12px 18px; border-radius: 999px; background: linear-gradient(90deg, var(--primary), var(--primary-2)); color: #0b0d17; font-weight: 800; box-shadow: 0 10px 40px rgba(16,215,226,0.35); }
        .mini-note { color: var(--muted); font-size: 13px; }

        .countdown-card { background: var(--card); border: 1px solid var(--stroke); border-radius: 18px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
        /* countdown container uses intrinsic spacing */
        .countdown-timer { display: grid; grid-template-columns: repeat(4, minmax(72px, 1fr)); gap: 10px; }
        .time-segment { display: grid; gap: 6px; text-align: center; background: rgba(255,255,255,0.04); border: 1px solid var(--stroke); padding: 12px; border-radius: 14px; }
        .time-value { font-family: 'Space Grotesk', sans-serif; font-size: clamp(22px, 5vw, 34px); font-weight: 800; color: var(--text); }
        .time-label { font-size: 12px; color: var(--muted); letter-spacing: 1px; text-transform: uppercase; }
        .giveaway-ended-message { color: #ffb3b3; text-align: center; margin-top: 10px; }

        /* Prize section - immersive wide card */
        /* full-bleed prize section */
        /* Prize Stage (radical redesign) */
        .prize-stage { position: relative; width: 100vw; left: 50%; transform: translateX(-50%); border: 1px solid var(--stroke); border-radius: 22px; overflow: hidden; background: #0f1328; }
        .prize-stage .stage-bg { position: absolute; inset: 0; background-size: cover; background-position: center; filter: saturate(1.05) contrast(1.05); transform: scale(1.06); }
        .prize-stage .stage-overlay { position: absolute; inset: 0; background: radial-gradient(75% 60% at 50% 0%, rgba(108,124,255,0.18), transparent 60%), linear-gradient(180deg, rgba(12,16,34,0.05), rgba(12,16,34,0.85)); }
        .stage-ticker { position: absolute; top: 0; left: 0; width: 100%; overflow: hidden; border-bottom: 1px solid var(--stroke); background: rgba(0,0,0,0.25); z-index: 2; }
        .rules-stage .stage-ticker { top: auto; bottom: 0; border-bottom: 0; border-top: 1px solid var(--stroke); }
        .ticker-track { display: inline-block; white-space: nowrap; animation: ticker-scroll 18s linear infinite; padding: 8px 0; color: var(--muted); font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase; }
        @keyframes ticker-scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .prize-content { position: relative; z-index: 1; display: grid; grid-template-columns: 1fr; gap: clamp(16px, 3vw, 28px); padding: clamp(28px, 4vw, 40px) 0 clamp(90px, 10vw, 160px); align-items: center; width: min(1200px, 92vw); margin: 0 auto; }
        .ticket-card { position: relative; display: grid; grid-template-columns: 1.2fr auto 0.9fr; gap: 16px; align-items: stretch; background: rgba(255,255,255,0.92); border: 1px solid rgba(0,0,0,0.08); border-radius: 18px; padding: clamp(14px, 2.4vw, 18px); box-shadow: 0 10px 30px rgba(0,0,0,0.18); color: #0b0d17; }
        .ticket-left { position: relative; display: grid; gap: 10px; padding: clamp(12px, 2vw, 16px); background: rgba(255,255,255,0.75); border: 1px dashed rgba(0,0,0,0.12); border-radius: 16px; }
        .ticket-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; border-bottom: 1px dashed rgba(0,0,0,0.12); padding-bottom: 8px; margin-bottom: 6px; }
        .ticket-admit { font-weight: 900; letter-spacing: 1px; text-transform: uppercase; color: #9AE7EE; }
        .ticket-event { color: #0b0d17; font-weight: 800; }
        .ticket-serial { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; color: #586072; }
        .ticket-barcode { margin-top: 6px; height: 46px; border-radius: 8px; background: linear-gradient(#fff,#fff) padding-box, linear-gradient(90deg, rgba(0,0,0,0.08), rgba(0,0,0,0.05)) border-box; border: 1px solid rgba(0,0,0,0.1); overflow: hidden; }
        .ticket-barcode::before { content: ""; display: block; height: 100%; background: repeating-linear-gradient(90deg, #0b0d17 0 2px, transparent 2px 4px); filter: invert(1) brightness(0.6); }
        .ticket-perf { width: 10px; background-image: radial-gradient(circle at 5px 5px, rgba(255,255,255,0.22) 2px, transparent 2px); background-size: 10px 18px; background-repeat: repeat-y; opacity: 0.7; }
        .ticket-right { display: grid; gap: 12px; align-content: center; }
        /* Corner value badge (circular and larger, bolder) */
        .corner-value { position: absolute; top: -36px; right: -36px; width: 220px; height: 220px; border-radius: 50%; display: grid; place-items: center; text-align: center; background: radial-gradient(circle at 35% 30%, #9AE7EE, var(--primary-2)); color: #0b0d17; box-shadow: 0 30px 80px rgba(16,215,226,0.4); border: 10px double rgba(255,255,255,0.98); z-index: 3; }
        .corner-value span { display: block; font-family: 'Space Grotesk', sans-serif; font-weight: 1000; font-size: clamp(30px, 5vw, 60px); line-height: 1; letter-spacing: 0.6px; text-shadow: 0 2px 0 rgba(255,255,255,0.75), 0 12px 40px rgba(0,0,0,0.28); max-width: 90%; white-space: normal; overflow: visible; }
        .corner-value small { display: block; margin-top: 4px; font-size: 12px; font-weight: 800; opacity: 0.75; letter-spacing: 1px; text-transform: uppercase; }
        .punchlines { display: grid; gap: 6px; margin-bottom: 4px; }
        .gradient-text { font-family: 'Space Grotesk', sans-serif; font-weight: 900; font-size: clamp(28px, 4vw, 48px); background: linear-gradient(90deg, #9AE7EE, #6C7CFF, #10D7E2); -webkit-background-clip: text; background-clip: text; color: transparent; letter-spacing: 0.4px; }
        .thumbs { margin-top: 10px; display: none; gap: 10px; flex-wrap: wrap; }
        .thumb { width: 64px; height: 64px; border-radius: 12px; overflow: hidden; border: 1px solid var(--stroke); background: #0f1328; cursor: pointer; position: relative; }
        .thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .thumb.active { outline: 2px solid var(--primary-2); }
        @media (max-width: 980px) { .prize-content { grid-template-columns: 1fr; } .ticket-card { grid-template-columns: 1fr; } .ticket-perf { display: none; } }
        .prize-info { background: var(--card); border: 1px solid var(--stroke); border-radius: 22px; padding: clamp(16px, 2.4vw, 22px); display: grid; gap: 12px; }
        #prizeLimitedOffer { color: #9AE7EE; font-weight: 700; }
        #prizeName { color: #0b0d17; font-weight: 900; font-size: clamp(24px, 2.8vw, 30px); }
        #prizeValue { color: #2f3446; }
        #prizeDescription { color: #2f3446; }
        #prizeIncludedList h3 { text-align: left; color: #0b0d17; font-size: 16px; margin-top: 4px; margin-bottom: 4px; }
        #prizeIncludedList ul { display: flex; flex-wrap: wrap; gap: 10px; }
        #prizeIncludedList li { display: inline-flex; gap: 8px; align-items: center; color: #0b0d17; background: rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.08); padding: 8px 12px; border-radius: 999px; white-space: nowrap; }
        #prizeIncludedList li i { color: var(--primary-2); }
        .right-visual { width: 100%; border-radius: 16px; min-height: 160px; background-size: cover; background-position: center; border: 1px solid rgba(0,0,0,0.08); }
        .actions-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; margin-top: 4px; }
        #prizeCta { display: inline-flex; align-items: center; justify-content: center; gap: 10px; padding: 14px 22px; border-radius: 16px; background: var(--primary-2); color: #0b0d17; font-weight: 900; font-size: clamp(16px, 1.8vw, 20px); box-shadow: 0 10px 28px rgba(16,215,226,0.25); }
        .ghost-btn { display: none; }
        .guarantees { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 6px; }
        .guarantee-item { display: inline-flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 999px; background: rgba(0,0,0,0.03); border: 1px dashed rgba(0,0,0,0.12); color: #2f3446; font-size: 14px; }
        .guarantee-item i { color: #7DFFA7; }

        /* Steps / Highlights as cards */
        /* how-to-enter inherits global section spacing */
        /* How To Enter: stage + premium step cards */
        .howto-stage { position: relative; width: 100vw; left: 50%; transform: translateX(-50%); border: 1px solid var(--stroke); border-radius: 22px; overflow: hidden; background: #0f1328; }
        .howto-stage .howto-bg { position: absolute; inset: 0; background-size: cover; background-position: center; filter: saturate(1.05) contrast(1.05); transform: scale(1.04); z-index: 0; }
        .howto-stage .howto-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.82); z-index: 1; }
        .howto-stage .howto-pattern { position: absolute; inset: 0; z-index: 2; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Ccircle cx='2' cy='2' r='1.2' fill='%23ffffff' fill-opacity='0.45'/%3E%3C/svg%3E"); background-size: 8px 8px; background-repeat: repeat; pointer-events: none; }
        .howto-content { position: relative; z-index: 3; width: min(1200px, 92vw); margin: 0 auto; padding: clamp(24px, 4vw, 36px) 0 clamp(90px, 10vw, 160px); }

        /* Rules & Eligibility stage */
        .rules-stage { position: relative; width: 100vw; left: 50%; transform: translateX(-50%); border: 1px solid var(--stroke); border-radius: 22px; overflow: hidden; background: #0f1328; }
        .rules-stage .rules-bg { position: absolute; inset: 0; background-size: cover; background-position: center; filter: blur(2px) saturate(1.05) contrast(1.05); transform: scale(1.08); z-index: 0; }
        .rules-stage .rules-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.82); z-index: 1; }
        .rules-stage .rules-pattern { position: absolute; inset: 0; z-index: 2; background-image: repeating-linear-gradient(to right, rgba(255,255,255,0.14) 0, rgba(255,255,255,0.14) 1px, transparent 1px, transparent 24px), repeating-linear-gradient(to bottom, rgba(255,255,255,0.1) 0, rgba(255,255,255,0.1) 1px, transparent 1px, transparent 24px); background-repeat: repeat; pointer-events: none; }
        .rules-content { position: relative; z-index: 3; width: min(1200px, 92vw); margin: 0 auto; padding: clamp(24px, 4vw, 36px) 0 clamp(90px, 10vw, 160px); }
        .rules-grid { display: grid; grid-template-columns: 1fr 1fr; gap: clamp(14px, 2vw, 22px); align-items: start; }
        /* Layout: fair/notice in columns, FAQ and Tips span full width rows */
        #rulesFaqCard, #rulesTipsSection { grid-column: 1 / -1; }
        .rule-card { background: rgba(17,20,35,0.94); border: 1px solid rgba(255,255,255,0.15); border-radius: 18px; padding: 16px; color: #E6E9F2; box-shadow: 0 10px 24px rgba(0,0,0,0.28); }
        .rule-card h3 { font-size: 18px; margin-bottom: 6px; color: #E6E9F2; }
        .rule-card p { color: #A7B0C0; font-size: 14px; }
        #rulesTipsSection { margin-top: 10px; }
        #rulesTipsList { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 14px; margin-top: 12px; max-width: 1200px; margin-left: auto; margin-right: auto; }
        #rulesTipsList li { color: #E6E9F2; background: rgba(17,20,35,0.9); border: 1px solid rgba(255,255,255,0.18); padding: 14px 16px; border-radius: 14px; display: flex; align-items: center; gap: 12px; width: 100%; }
        #rulesTipsList li i { color: #7DFFA7; }
        #rulesFaqList { margin-top: 10px; }
        #rulesFaqList .faq-item { background: rgba(17,20,35,0.9); border: 1px solid rgba(255,255,255,0.15); border-radius: 12px; margin-bottom: 8px; overflow: hidden; }
        #rulesFaqList .faq-question { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; color: #E6E9F2; }
        #rulesFaqList .faq-answer { padding: 0 12px 12px 12px; color: #A7B0C0; display: none; }
        #rulesFaqList .faq-item.open .faq-answer { display: block; }
        #rulesPdfLink { display: none; margin-top: 8px; color: #0b0d17; font-weight: 800; background: var(--primary-2); padding: 8px 12px; border-radius: 10px; width: fit-content; }
        @media (max-width: 800px) { .rules-grid { grid-template-columns: 1fr; } }
        .steps-wrap { counter-reset: step; display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: clamp(14px, 2vw, 22px); margin-top: 12px; }
        .step-card { position: relative; background: rgba(17,20,35,0.94); border: 1px solid rgba(255,255,255,0.15); border-radius: 18px; padding: 18px 16px 16px 16px; color: var(--text); box-shadow: 0 10px 24px rgba(0,0,0,0.28); overflow: hidden; transition: transform .2s ease, box-shadow .2s ease; }
        .step-card::before { content: counter(step, decimal-leading-zero); counter-increment: step; position: absolute; top: -8px; right: 10px; font-family: 'Space Grotesk', sans-serif; font-weight: 900; font-size: 56px; color: rgba(255,255,255,0.06); pointer-events: none; }
        .step-card::after { content: ""; position: absolute; inset: 0; background: radial-gradient(60% 60% at 0% 0%, rgba(16,215,226,0.08), transparent 60%); pointer-events: none; }
        .step-card:hover { transform: translateY(-4px); box-shadow: 0 14px 30px rgba(0,0,0,0.3); }
        .step-card i { color: var(--primary-2); margin-bottom: 10px; font-size: 22px; }
        .step-card h3 { font-size: 18px; margin-bottom: 6px; color: #E6E9F2; }
        .step-card p { color: #A7B0C0; font-size: 14px; }
        .howto-divider { height: 1px; width: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); margin: 16px 0; }
        .highlights { margin: 10px auto 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: clamp(10px, 2vw, 14px); max-width: 1000px; }
        .highlight-item { color: #E6E9F2; background: rgba(17,20,35,0.9); border: 1px solid rgba(255,255,255,0.15); padding: 12px; border-radius: 999px; display: inline-flex; align-items: center; gap: 10px; }

        /* Enter Now: full-bleed stage + premium form card */
        .enter-stage { position: relative; width: 100vw; left: 50%; transform: translateX(-50%); border: 1px solid var(--stroke); border-radius: 22px; overflow: hidden; background: #0f1328; }
        .enter-stage .enter-bg { position: absolute; inset: 0; background-size: cover; background-position: center; filter: saturate(1.05) contrast(1.05); transform: scale(1.04); }
        .enter-stage .enter-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.82); }
        .enter-content { position: relative; z-index: 1; width: min(1200px, 92vw); margin: 0 auto; padding: clamp(24px, 4vw, 36px) 0 clamp(90px, 10vw, 160px); }
        .entry-grid { display: grid; grid-template-columns: 1fr 1fr; gap: clamp(16px, 3vw, 24px); align-items: center; }
        .entry-visual { border: 1px solid var(--stroke); background: #0f1328; border-radius: 22px; min-height: 420px; background-size: cover; background-position: center; box-shadow: 0 12px 28px rgba(0,0,0,0.28); }
        .entry-card { position: relative; background: #ffffff; border: 1px solid rgba(0,0,0,0.08); border-radius: 16px; padding: clamp(18px, 2.4vw, 26px); color: #0b0d17; box-shadow: 0 6px 20px rgba(0,0,0,0.08); max-width: 520px; justify-self: center; }
        .entry-card h2.section-title { font-size: clamp(24px, 2.8vw, 30px); margin-bottom: 6px; text-align: left; color: #0b0d17; }
        .entry-card p.section-subtitle { color: #2f3446; margin: 0 0 8px; text-align: left; }
        .entry-intro { margin-bottom: 10px; }
        .entry-divider { height: 1px; width: 100%; background: linear-gradient(90deg, transparent, rgba(0,0,0,0.15), transparent); margin: 10px 0 16px; }
        .form-ribbon { display: none; }
        form#giveawayEntryForm { display: grid; gap: 14px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .form-group { display: grid; gap: 8px; }
        .form-group label { color: var(--muted); font-size: 14px; }
        .form-group input { background: #ffffff; border: 1px solid rgba(0,0,0,0.12); color: #0b0d17; padding: 14px 14px; border-radius: 12px; outline: none; transition: border-color .15s ease, box-shadow .15s ease; }
        .form-group input:focus { border-color: var(--primary-2); box-shadow: 0 0 0 3px rgba(16,215,226,0.25); }
        .form-group input::placeholder { color: #80879a; }
        .consent { display: grid; grid-template-columns: auto 1fr; gap: 12px; align-items: start; background: rgba(255,255,255,0.04); border: 1px solid var(--stroke); padding: 12px 14px; border-radius: 12px; }
        .consent input[type="checkbox"] { width: 18px; height: 18px; }
        #entryFormSubmitButton { position: relative; display: inline-flex; align-items: center; gap: 10px; justify-content: center; padding: 16px 18px; border-radius: 12px; font-weight: 900; color: #0b0d17; background: var(--primary-2); width: 100%; font-size: clamp(16px, 1.8vw, 20px); box-shadow: 0 10px 26px rgba(16,215,226,0.22); }
        #entryFormSubmitButton:hover { filter: brightness(1.05); transform: translateY(-1px); }
        #entryFormSubmitButton:active { transform: translateY(0); }
        .button-text { opacity: 1; }
        .fa-spinner { display: none; }
        .cta-glow { display: none; }
        .form-social { margin-top: 12px; display: grid; gap: 10px; }
        .secure-row { display: flex; align-items: center; gap: 10px; color: #586072; font-size: 13px; margin-top: 8px; }
        .secure-row i { color: #7DFFA7; }

        /* Footer (redesigned) */
        footer#footer-contact { position: relative; border-top: 1px solid var(--stroke); background: radial-gradient(60% 60% at 50% 10%, rgba(108,124,255,0.08), rgba(10,13,26,0.9)); padding: 48px 0; color: var(--muted); }
        .footer-accent { height: 2px; width: 100%; background: linear-gradient(90deg, transparent, var(--primary), var(--primary-2), transparent); opacity: 0.6; margin-bottom: 18px; }
        #footerTopDisclaimer { color: var(--muted); margin-bottom: 16px; font-size: 14px; background: rgba(255,255,255,0.04); border: 1px solid var(--stroke); border-radius: 12px; padding: 10px 12px; }
        .footer-grid { display: grid; grid-template-columns: 1.2fr 1fr 1fr; gap: 18px; }
        .footer-card { background: var(--card); border: 1px solid var(--stroke); border-radius: 16px; padding: 16px; }
        .brand { display: grid; gap: 10px; }
        .logo-line { display: flex; align-items: center; gap: 12px; }
        #footerNewOrganizerLogo, #footerNewSecondaryLogo { width: 54px; height: 54px; object-fit: contain; filter: drop-shadow(0 2px 10px rgba(0,0,0,0.4)); }
        /* Brand row (secondary logo + brokerage + address) */
        .brand-row { display: flex; align-items: stretch; gap: 12px; }
        .brand-square { height: 100%; aspect-ratio: 1 / 1; min-width: 112px; object-fit: cover; border-radius: 12px; border: 1px solid var(--stroke); background: #0f1328; }
        .brand-info { display: grid; gap: 4px; flex: 1; align-content: start; }
        .brand-info p { margin: 0; line-height: 1.3; }
        /* Agent headshot layout */
        .agent-row { display: flex; align-items: flex-start; gap: 12px; }
        .agent-headshot { width: 112px; height: 112px; object-fit: cover; border-radius: 12px; border: 1px solid var(--stroke); background: #0f1328; }
        .agent-info { display: grid; gap: 6px; }
        #newFooterOrganizerName { color: var(--text); font-weight: 800; }
        #newFooterBrokerageName { color: #9AE7EE; font-weight: 700; }
        #newFooterAddress { color: var(--muted); }
        .footer-social-icons { display: flex; flex-wrap: wrap; gap: 8px; }
        .footer-social-icons a { display: inline-flex; width: 60px; height: 60px; align-items: center; justify-content: center; border: 1px solid var(--stroke); border-radius: 12px; color: var(--text); background: rgba(255,255,255,0.04); }
        .agent { display: grid; gap: 6px; }
        #newFooterAgentName { color: var(--text); font-weight: 800; }
        #newFooterAgentTitle { color: var(--muted); }
        .footer-agent-detail a { color: var(--text); text-decoration: underline; }
        .footer-cta-bar { display: flex; justify-content: space-between; align-items: center; gap: 12px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.04); padding: 14px; border-radius: 14px; margin-top: 18px; }
        .footer-cta-bar a.button { display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: 999px; background: linear-gradient(90deg, var(--primary), var(--primary-2)); color: #0b0d17; font-weight: 800; }
        .footer-bottom { display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; align-items: center; margin-top: 18px; font-size: 14px; padding-top: 12px; border-top: 1px dashed var(--stroke); }
        @media (max-width: 980px) { .footer-grid { grid-template-columns: 1fr; } }

        /* Modals (reuse IDs for logic) */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 100; }
        .modal-overlay.visible { display: flex; }
        .modal-content { background: var(--card); border: 1px solid var(--stroke); color: var(--text); border-radius: 18px; padding: 20px; width: min(92vw, 800px); position: relative; font-size: 1.5rem; }
        .modal-content h2 { font-size: 2.4rem; line-height: 1.15; }
        .modal-close-btn { position: absolute; top: 4px; right: 4px; color: var(--muted); background: transparent; border: 1px solid var(--stroke); width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; }
        #question-modal-steps-container .modal-step { display: none; }
        #question-modal-steps-container .modal-step.active { display: block; }
        #question-modal-steps-container .modal-option-btn { width: 100%; padding: 14px 16px; border-radius: 10px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.04); color: var(--text); margin-top: 10px; text-align: left; font-size: 1.125rem; }
        #question-modal-steps-container .modal-option-btn.selected { background: linear-gradient(90deg, var(--primary), var(--primary-2)); color: #0b0d17; border-color: transparent; }
        #question-modal-steps-container .question-text { font-size: 1.25em; }
        @media (max-width: 560px) {
            .modal-content { font-size: 1.25rem; }
            .modal-content h2 { font-size: 2rem; }
        }

        /* Responsive */
        @media (max-width: 980px) { .hero-inner { grid-template-columns: 1fr; } .prize-grid { grid-template-columns: 1fr; } .entry-grid { grid-template-columns: 1fr; } }
        @media (max-width: 720px) { .stage-ticker { display: none; } }
        @media (max-width: 560px) {
            /* Mobile header: center brand logo, hide nav links */
            header#mainNavV2 .bar { justify-content: center; }
            .v2-nav { display: none !important; }
            #navBrandLogo { margin: 0 auto; }
            /* Footer agent headshot scale down on mobile */
            .agent-headshot { width: 84px; height: 84px; }
            .countdown-timer { grid-template-columns: repeat(2, 1fr); }
            .form-row { grid-template-columns: 1fr; }
            /* Prize section mobile optimizations */
            .title-wrap { padding-top: clamp(28px, 7vw, 48px); }
            .prize-content { padding: clamp(16px, 6vw, 28px) 0 clamp(72px, 12vw, 110px); }
            .ticket-card { padding: 14px; grid-template-columns: 1fr; gap: 10px; }
            /* Rethink value badge on mobile: switch to inline pill instead of corner circle */
            .corner-value { position: static; width: 100%; height: auto; margin: 0 0 10px; padding: 10px 14px; border-radius: 12px; background: var(--primary-2); border-width: 0; box-shadow: 0 10px 22px rgba(16,215,226,0.25); text-align: center; }
            .corner-value span { font-size: clamp(18px, 6vw, 24px); line-height: 1; }
            .corner-value small { display: none; }
            .ticket-left { padding-top: 0; gap: 8px; }
            #prizeName { font-size: clamp(20px, 5.5vw, 24px); }
            .gradient-text { font-size: clamp(22px, 7vw, 32px); }
            .actions-row { gap: 8px; }
            #prizeCta { width: 100%; font-size: clamp(15px, 4.5vw, 18px); padding: 12px; border-radius: 12px; }
            #prizeIncludedList { margin-top: 10px !important; }
            #prizeIncludedList ul { display: grid; grid-template-columns: 1fr; gap: 8px; }
            #prizeIncludedList li { justify-content: flex-start; white-space: normal; border-radius: 12px; padding: 10px 12px; align-items: flex-start; font-size: 14px; }
            #prizeIncludedList li i { font-size: 14px; margin-top: 2px; flex-shrink: 0; }
            #prizeIncludedList li span { display: block; line-height: 1.3; word-break: break-word; }
            .guarantees { gap: 8px; }
            .guarantee-item { font-size: 12px; padding: 6px 8px; }
            /* Ensure limited badge sits above list cleanly */
            #prizeLimitedOffer { align-self: start; }
            /* Rules & Eligibility mobile optimizations */
            .rules-content { padding: clamp(18px, 6vw, 28px) 0 clamp(72px, 12vw, 110px); }
            .rules-grid { grid-template-columns: 1fr; gap: 10px; }
            .rule-card { padding: 12px; }
            .rule-card h3 { font-size: 16px; }
            .rule-card p { font-size: 13px; }
            #rulesFaqList .faq-question { padding: 12px; font-size: 14px; }
            #rulesFaqList .faq-answer { font-size: 13px; word-break: break-word; }
            #rulesTipsList { grid-template-columns: 1fr; gap: 10px; max-width: none; }
            #rulesTipsList li { padding: 10px 12px; border-radius: 12px; font-size: 14px; }
            /* Footer brand square scale down on mobile */
            .brand-square { width: 84px; height: 84px; }
        }
    </style>

    <!-- Pixel -->
    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)}; if(!f._fbq)f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0'; n.queue=[]; t=b.createElement(e); t.async=!0; t.src=v; s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    if (typeof config !== 'undefined' && config.settings && config.settings.facebookPixelId) { fbq('init', config.settings.facebookPixelId); }
    fbq('track', 'PageView');
    </script>
</head>
<body id="pageBody">
    <canvas id="confetti-canvas"></canvas>
    <header id="mainNavV2">
        <div class="wrap bar">
            <a href="#hero" id="navBrandLogo">Giveaway</a>
            <nav class="v2-nav">
                <a href="#prize-details">Prize</a>
                <a href="#how-to-enter">How to Enter</a>
                <a href="#entry-form">Enter</a>
            </nav>
        </div>
    </header>

    <section id="hero">
        <div class="hero-bg" id="heroBg"></div>
        <div class="hero-overlay"></div>
        <div class="wrap hero-inner">
            <div class="hero-copy">
                <h1 id="heroTitle"></h1>
                <p id="heroSubtitle"></p>
                <p id="heroPromotionDates"></p>
                <div class="cta-row">
                    <a href="#entry-form" id="heroCta">Enter Now <i class="fas fa-arrow-right"></i></a>
                    <span class="mini-note">Limited time giveaway</span>
                </div>
            </div>
            <div class="countdown-card">
                <div class="countdown-timer-container" id="countdownTimerContainer">
                    <div class="countdown-timer">
                        <div class="time-segment"><span id="days" class="time-value">00</span><span class="time-label">Days</span></div>
                        <div class="time-segment"><span id="hours" class="time-value">00</span><span class="time-label">Hours</span></div>
                        <div class="time-segment"><span id="minutes" class="time-value">00</span><span class="time-label">Minutes</span></div>
                        <div class="time-segment"><span id="seconds" class="time-value">00</span><span class="time-label">Seconds</span></div>
                    </div>
                    <p class="giveaway-ended-message" style="display:none;">This giveaway has ended!</p>
                </div>
            </div>
        </div>
    </section>

    <main>
        <section id="prize-details">
            <div class="wrap">
                <div class="prize-stage" id="prizeStage">
                    <div class="stage-ticker"><div class="ticker-track" id="prizeTickerTrack"></div></div>
                    <div class="stage-bg" id="prizeStageBg"></div>
                    <div class="stage-overlay"></div>
                    <div class="prize-content">
                        <div class="title-wrap">
                            <h2 class="section-title title-minimal title-gradient">The Prize</h2>
                        </div>
                        <div class="ticket-card">
                            <div class="ticket-left">
                                <div class="ticket-header">
                                    <span class="ticket-admit">Admit Two</span>
                                    <span class="ticket-event" id="ticketEvent">Blue Jays Summer Game Night</span>
                                    <span class="ticket-serial" id="ticketSerial">SN-<span id="ticketSerialNum">6548552</span></span>
                                </div>
                                <div class="punchlines">
                                    <div class="gradient-text" id="punchline1"></div>
                                    <div class="gradient-text" style="font-size: clamp(16px, 2vw, 20px); opacity: .85;" id="punchline2"></div>
                                </div>
                                <h3 id="prizeName" class="title-gradient">Prize Name</h3>
                                <p id="prizeDescription">Description</p>
                                <div class="actions-row">
                                    <a href="#entry-form" id="prizeCta">I Want This <i class="fas fa-gift"></i></a>
                                    <a href="#how-to-enter" class="ghost-btn"><i class="fas fa-list-check"></i> How it works</a>
                                </div>
                                <div class="guarantees">
                                    <span class="guarantee-item"><i class="fas fa-shield-heart"></i> Fair random draw</span>
                                    <span class="guarantee-item"><i class="fas fa-badge-check"></i> No purchase needed</span>
                                    <span class="guarantee-item"><i class="fas fa-lock"></i> Secure entry</span>
                                </div>
                                <div class="ticket-barcode" aria-hidden="true"></div>
                            </div>
                            <div id="prizeValue" class="corner-value"><span>$0</span></div>
                            <div class="ticket-perf" aria-hidden="true"></div>
                            <div class="ticket-right">
                                <div id="prizeRightImage" class="right-visual"></div>
                                <div id="prizeIncludedList" style="margin-top:8px;">
                                    <h3 style="margin-top:6px;">What's Included</h3>
                                    <ul></ul>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="thumbs" id="prizeThumbsV2" style="display:none;"></div>
            </div>
        </section>

        <section id="how-to-enter">
            <div class="howto-stage">
                <div class="howto-bg" id="howtoBg"></div>
                <div class="howto-pattern"></div>
                <div class="howto-overlay"></div>
                <div class="howto-content">
                    <div class="title-wrap">
                        <h2 class="section-title title-minimal">How to Enter</h2>
                    </div>
                    <div class="steps-wrap" id="howToEnterSteps"></div>
                    <div class="howto-divider"></div>
                    <ul class="highlights" id="howToEnterHighlights"></ul>
                </div>
            </div>
        </section>

        

        <section id="entry-form">
            <div class="enter-stage">
                <div class="enter-bg" id="enterBg"></div>
                <div class="enter-overlay"></div>
                <div class="enter-content">
                    <div class="title-wrap">
                        <h2 class="section-title title-minimal">Enter Now</h2>
                    </div>
                    <div class="entry-grid">
                        <div class="entry-visual" id="entryVisual"></div>
                        <div class="entry-card" id="entryFormCard">
                            <span class="form-ribbon">Final Step</span>
                            <div class="entry-intro">
                                <p class="section-subtitle" id="entryFormSubtitle"></p>
                                <p id="entryFormCount"></p>
                            </div>
                            <div class="entry-divider"></div>
                            <form id="giveawayEntryForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fullName">Full Name</label>
                                    <input type="text" id="fullName" name="fullName" placeholder="e.g., Alex Winner" required autocomplete="name">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" name="email" placeholder="e.g., alex@example.com" required autocomplete="email">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="phoneNumber">Phone Number</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="e.g., (555) 123-4567" required autocomplete="tel" inputmode="tel">
                            </div>
                            <div class="consent">
                                <input type="checkbox" id="contactConsent" name="contactConsent" required>
                                <label for="contactConsent" id="contactConsentLabel">I agree to be contacted...</label>
                            </div>
                            <button type="submit" id="entryFormSubmitButton">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span class="button-text">Next</span>
                            </button>
                            <div class="cta-glow"></div>
                            <div class="secure-row"><i class="fas fa-lock"></i> Your details are encrypted & never shared.</div>
                        </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="rules">
            <div class="rules-stage">
                <div class="stage-ticker"><div class="ticker-track" id="rulesTickerTrack"></div></div>
                <div class="rules-bg" id="rulesBg"></div>
                <div class="rules-overlay"></div>
                <div class="rules-pattern"></div>
                <div class="rules-content">
                    <div class="title-wrap">
                        <h2 class="section-title title-minimal">Rules & Eligibility</h2>
                    </div>
                    <div class="rules-grid">
                        <div class="rule-card" id="rulesFairSelection"></div>
                        <div class="rule-card" id="rulesImportantNotice"></div>
                        <div class="rule-card" id="rulesFaqCard">
                            <h3>FAQ</h3>
                            <ul id="rulesFaqList"></ul>
                        </div>
                        <div class="rule-card" id="rulesTipsSection">
                            <h3>Tips for Entering</h3>
                            <ul id="rulesTipsList"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer id="footer-contact">
        <div class="wrap">
            <div class="footer-accent"></div>
            <p id="footerTopDisclaimer">Disclaimer</p>
            <div class="footer-grid">
                <div class="footer-card agent">
                    <div class="agent-row">
                        <img id="footerAgentHeadshot" class="agent-headshot" alt="Organizer Headshot">
                        <div class="agent-info">
                            <p class="footer-agent-name" id="newFooterAgentName">Agent</p>
                            <p class="footer-agent-detail" id="newFooterAgentTitle">Title</p>
                            <p class="footer-agent-detail"><i class="fas fa-phone"></i> <a href="#" id="newFooterAgentPhoneLink">(000) 000-0000</a></p>
                            <p class="footer-agent-detail"><i class="fas fa-envelope"></i> <a href="#" id="newFooterAgentEmailLink">agent@example.com</a></p>
                        </div>
                    </div>
                    
                </div>
                <div class="footer-card brand">
                    <h4 style="color: var(--text); margin-bottom: 2px;">Brokerage</h4>
                    <div class="brand-row">
                        <img id="footerNewSecondaryLogo" class="brand-square" alt="Secondary">
                        <div class="brand-info">
                            <p id="newFooterBrokerageName">Brokerage</p>
                            <p id="newFooterAddress"><i class="fas fa-map-marker-alt"></i> Address</p>
                        </div>
                    </div>
                </div>
                <div class="footer-card">
                    <h4 style="color: var(--text); margin-bottom: 8px;">Connect</h4>
                    <div class="footer-social-icons" id="newFooterSocialIcons"></div>
                </div>
                
            </div>
            <div class="footer-bottom">
                <span id="newFooterCopyrightText">Â©</span>
                <a href="#" id="newFooterPrivacyLink">Privacy</a>
            </div>
        </div>
    </footer>

    <!-- Question Modal -->
    <div class="modal-overlay" id="questionModalOverlay">
        <div class="modal-content" id="questionModalContent" role="dialog" aria-modal="true" aria-labelledby="questionModalTitle">
            <button class="modal-close-btn" id="questionModalCloseBtn" aria-label="Close"><i class="fas fa-times" aria-hidden="true"></i></button>
            <div id="question-modal-steps-container"></div>
        </div>
    </div>
    <!-- Success Modal (content populated via config) -->
    <div class="modal-overlay" id="successModalOverlay">
        <div class="modal-content" id="successModalContent">
            <button class="modal-close-btn" id="modalCloseBtn" aria-label="Close"><i class="fas fa-times"></i></button>
            <div id="modal-step-final" style="display: none;">
                 <i class="fas fa-gift icon"></i>
                 <h2 id="modalHeader">You're In!</h2>
                 <p id="modalMainMessage">Your entry for the <strong id="modalGiveawayName">Giveaway</strong> has been submitted. Good luck!</p>
                 <p id="modalEmailPrompt">Winners will be notified via email.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof config === 'undefined') { alert('Missing config.js'); return; }

        const pageBody = document.getElementById('pageBody');
        const heroSection = document.getElementById('hero');
        const heroTitleElement = document.getElementById('heroTitle');
        const submitButton = document.getElementById('entryFormSubmitButton');
        const spinnerIcon = submitButton?.querySelector('.fa-spinner');
        const successModal = document.getElementById('successModalOverlay');
        const modalClose = document.getElementById('modalCloseBtn');
        const myConfettiInstance = (typeof confetti === 'function' && document.getElementById('confetti-canvas')) ? confetti.create(document.getElementById('confetti-canvas'), { resize: true, useWorker: true }) : null;

        function setText(id, value) { const el = document.getElementById(id); if (el && value !== undefined) el.textContent = value; }
        function setHTML(id, value) { const el = document.getElementById(id); if (el && value !== undefined) el.innerHTML = value; }
        function setHref(id, value) { const el = document.getElementById(id); if (el && value !== undefined) el.href = value; }

        // Theme + color overrides
        (function applyTheme(){
            const theme = config.settings?.theme || 'dark';
            if (pageBody) pageBody.classList.add(`theme-${theme}`);
            const primary = config.settings?.primaryColorOverride; const secondary = config.settings?.secondaryColorOverride;
            if (primary && /^#([0-9A-Fa-f]{3}){1,2}$/.test(primary)) document.body.style.setProperty('--primary', primary);
            if (secondary && /^#([0-9A-Fa-f]{3}){1,2}$/.test(secondary)) document.body.style.setProperty('--primary-2', secondary);
        })();

        // Populate hero
        (function populateHero(){
            try {
                document.title = config.meta?.pageTitle || 'Giveaway';
                setText('navBrandLogo', config.meta?.navBrandLogoText);
                setText('heroSubtitle', config.giveaway?.heroSubheadline);
                setText('heroPromotionDates', config.giveaway?.promotionDates);
                const hCta = document.getElementById('heroCta');
                if (hCta && config.giveaway?.heroCtaText) hCta.innerHTML = `${config.giveaway.heroCtaText} <i class="fas fa-arrow-right"></i>`;
                const bg = document.getElementById('heroBg');
                const img = config.giveaway?.heroBackgroundImageUrl;
                if (bg && img) { bg.style.backgroundImage = `url('${img}')`; }
            } catch(e) { console.error(e); }
        })();

        // Typewriter
        (function typeWriter(){
            const textToType = config.giveaway?.heroHeadline || 'Welcome!'; let i = 0; const speed = 40;
            if (!heroTitleElement) return;
            heroTitleElement.innerHTML = ''; heroTitleElement.style.opacity = '1';
            (function type(){ if (i < textToType.length) { if (textToType.charAt(i) === '<') { const tagEnd = textToType.indexOf('>', i); if (tagEnd !== -1) { heroTitleElement.innerHTML += textToType.substring(i, tagEnd + 1); i = tagEnd; } } else { heroTitleElement.innerHTML += textToType.charAt(i); } i++; setTimeout(type, speed + Math.random() * 20 - 10); } })();
        })();

        // Countdown
        (function startCountdown(){
            const container = document.getElementById('countdownTimerContainer'); if (!container || !config.giveaway?.endDate) { if (container) container.style.display = 'none'; return; }
            const endedMessageEl = container.querySelector('.giveaway-ended-message');
            const segments = container.querySelectorAll('.time-segment');
            function update(){
                const endDate = new Date(config.giveaway.endDate).getTime(); const now = Date.now(); const timeLeft = endDate - now;
                if (isNaN(endDate) || timeLeft < 0) { segments.forEach(s => s.style.display = 'none'); if (endedMessageEl) endedMessageEl.style.display = 'block'; const heroCta = document.getElementById('heroCta'); if (heroCta) { heroCta.innerHTML = 'Giveaway Ended'; heroCta.style.pointerEvents = 'none'; heroCta.style.opacity = '0.7'; } const prizeCta = document.getElementById('prizeCta'); if (prizeCta) { prizeCta.innerHTML = 'Giveaway Ended'; prizeCta.style.pointerEvents = 'none'; prizeCta.style.opacity = '0.7'; } if (submitButton) submitButton.disabled = true; return; }
                function pad(n){ return String(n).padStart(2,'0'); }
                const d = Math.floor(timeLeft / (1000*60*60*24));
                const h = Math.floor((timeLeft % (1000*60*60*24))/(1000*60*60));
                const m = Math.floor((timeLeft % (1000*60*60))/(1000*60));
                const s = Math.floor((timeLeft % (1000*60))/1000);
                setText('days', pad(d)); setText('hours', pad(h)); setText('minutes', pad(m)); setText('seconds', pad(s));
            }
            update(); setInterval(update, 1000);
        })();

        // Ticket header dynamic text
        (function ticketHeader(){
            try {
                const eventEl = document.getElementById('ticketEvent');
                const serialNumEl = document.getElementById('ticketSerialNum');
                if (eventEl && config.giveaway?.name) eventEl.textContent = config.giveaway.name;
                if (serialNumEl) {
                    const seed = Math.abs(Array.from((config.giveaway?.name||'')+Date.now()).reduce((a,c)=>((a<<5)-a)+c.charCodeAt(0),0)).toString().slice(-6).padStart(6,'0');
                    serialNumEl.textContent = seed;
                }
            } catch (e) { /* no-op */ }
        })();

        // Prize population
        (function populatePrize(){
            try {
                if (!config.prize) return;
                setText('prizeName', config.prize.name);
                // Value badge: set both amount and keep small label if present
                const valueBadge = document.getElementById('prizeValue');
                if (valueBadge) {
                    const amt = config.prize.value || '';
                    valueBadge.innerHTML = `<span>${amt}</span>`;
                }
                setHTML('prizeDescription', config.prize.description);
                const limited = document.getElementById('prizeLimitedOffer');
                if (limited) limited.textContent = config.prize.limitedTimeOfferText || 'Limited';

                // Punchlines from config.giveaway (fallbacks if missing)
                if (config.giveaway) {
                    const p1 = document.getElementById('punchline1');
                    const p2 = document.getElementById('punchline2');
                    if (p1) p1.textContent = config.giveaway.punchline1 || '';
                    if (p2) p2.textContent = config.giveaway.punchline2 || '';
                }

                // Ticker track: build from giveaway name/value/cta or custom text
                const ticker = document.getElementById('prizeTickerTrack');
                if (ticker) {
                    const parts = [];
                    if (config.giveaway?.name) parts.push(config.giveaway.name);
                    if (config.prize?.value) parts.push(config.prize.value + ' Value');
                    if (config.prize?.ctaButtonText) parts.push(config.prize.ctaButtonText);
                    // Repeat to fill width
                    const msg = parts.filter(Boolean).join(' â¢ ');
                    ticker.textContent = `${msg} â¢ ${msg} â¢ ${msg} â¢ ${msg}`;
                }

                // Included list
                const incList = document.querySelector('#prizeIncludedList ul');
                if (incList && config.prize.includedItems) {
                    incList.innerHTML = '';
                    config.prize.includedItems.forEach(it => {
                        const li = document.createElement('li');
                        li.innerHTML = `<i class="${it.icon||'fas fa-check'}"></i> <span>${it.text}</span>`;
                        incList.appendChild(li);
                    });
                }

                // Stage background & thumbnails
                const images = Array.isArray(config.prize.images) ? config.prize.images : [];
                const stageBg = document.getElementById('prizeStageBg');
                if (stageBg && images.length) stageBg.style.backgroundImage = `url('${images[0].src}')`;
                const rightVisual = document.getElementById('prizeRightImage');
                if (rightVisual && images.length > 2 && images[0]?.src) {
                    rightVisual.style.backgroundImage = `url('${images[0].src}')`;
                }
                const entryVisual = document.getElementById('entryVisual');
                if (entryVisual && images.length > 1 && images[1]?.src) entryVisual.style.backgroundImage = `url('${images[1].src}')`;

                const thumbsC = document.getElementById('prizeThumbsV2');
                if (thumbsC) {
                    thumbsC.innerHTML = '';
                    images.forEach((img, idx) => {
                        const d = document.createElement('div'); d.className = 'thumb' + (idx===0 ? ' active' : '');
                        d.innerHTML = `<img src="${img.src}" alt="${img.alt||'Thumb'}">`;
                        d.addEventListener('click', () => {
                            document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
                            d.classList.add('active');
                            if (stageBg) stageBg.style.backgroundImage = `url('${img.src}')`;
                        });
                        thumbsC.appendChild(d);
                    });
                }

                const pCta = document.getElementById('prizeCta'); if (pCta && config.prize.ctaButtonText) pCta.innerHTML = `${config.prize.ctaButtonText} <i class=\"fas fa-gift\"></i>`;
            } catch(e) { console.error('Prize error', e); }
        })();

        // Stage parallax tilt
        (function tilt(){
            const stage = document.getElementById('prizeStage'); const bg = document.getElementById('prizeStageBg');
            if (!stage || !bg) return;
            const strength = 6;
            function onMove(e){ const rect = stage.getBoundingClientRect(); const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2; const x = (e.clientX - cx) / (rect.width/2); const y = (e.clientY - cy) / (rect.height/2); const rx = Math.max(Math.min(-y * strength, strength), -strength); const ry = Math.max(Math.min(x * strength, strength), -strength); bg.style.transform = `translateZ(0) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.05)`; }
            function reset(){ bg.style.transform = 'translateZ(0) rotateX(0deg) rotateY(0deg) scale(1.05)'; }
            stage.addEventListener('mousemove', onMove); stage.addEventListener('mouseleave', reset);
        })();

        // Auto-rotate stage background images
        (function autoRotate(){
            const stageBg = document.getElementById('prizeStageBg');
            const images = Array.isArray(config.prize?.images) ? config.prize.images : [];
            if (!stageBg || images.length < 2) return;
            let idx = 0;
            setInterval(() => { idx = (idx + 1) % images.length; stageBg.style.backgroundImage = `url('${images[idx].src}')`; }, 6000);
        })();

        // How to enter
        (function populateHow(){
            try {
                const stepsC = document.getElementById('howToEnterSteps');
                const howtoBg = document.getElementById('howtoBg');
                if (howtoBg) {
                    const heroImg = config.giveaway?.heroBackgroundImageUrl;
                    if (heroImg && heroImg.trim() !== '') {
                        howtoBg.style.backgroundImage = `url('${heroImg}')`;
                    } else if (config.prize?.images?.length) {
                        const bgImg = config.prize.images[2]?.src || config.prize.images[0]?.src;
                        if (bgImg) howtoBg.style.backgroundImage = `url('${bgImg}')`;
                    }
                }
                if (stepsC && config.howToEnter?.steps) {
                    stepsC.innerHTML = '';
                    config.howToEnter.steps.forEach((s, idx) => {
                        const card = document.createElement('div');
                        card.className = 'step-card';
                        card.innerHTML = `<i class="${s.icon||'fas fa-info-circle'}"></i><h3>${s.title}</h3><p>${s.description}</p>`;
                        stepsC.appendChild(card);
                    });
                }
                const hlC = document.getElementById('howToEnterHighlights');
                if (hlC && config.howToEnter?.highlights) {
                    hlC.innerHTML = '';
                    config.howToEnter.highlights.forEach(h => {
                        const li = document.createElement('li');
                        li.className = 'highlight-item';
                        li.innerHTML = `<i class="${h.icon||'fas fa-star'}"></i> <span>${h.text}</span>`;
                        hlC.appendChild(li);
                    });
                }
            } catch(e){ console.error(e);} 
        })();

        // Populate Entry Form Image Panel
        try {
            const entryImagePanel = document.querySelector('#entry-form .entry-visual');
            if (entryImagePanel && config.prize?.images?.length > 1 && config.prize.images[1]?.src) {
                entryImagePanel.style.backgroundImage = `url('${config.prize.images[1].src}')`;
            } else if (entryImagePanel) {
                entryImagePanel.style.backgroundImage = "url('https://via.placeholder.com/800x600/eee/ccc?text=Entry+Visual+Missing')";
            }
            const enterBg = document.getElementById('enterBg');
            if (enterBg && config.prize?.images?.length) {
                const altImg = config.prize.images[3]?.src || config.prize.images[0]?.src;
                if (altImg) enterBg.style.backgroundImage = `url('${altImg}')`;
            }
        } catch (e) {
            console.error("Err Entry Form Image:", e);
        }

        // Footer population (new footer API)
        (function populateFooter(){ try {
            const fc = config.footerContact || {}; const meta = config.meta || {};
            const orgLogo = document.getElementById('footerNewOrganizerLogo'); if (orgLogo && fc.organizerLogoUrl) { orgLogo.src = fc.organizerLogoUrl; orgLogo.alt = fc.organizerName || 'Organizer'; }
            const agentShot = document.getElementById('footerAgentHeadshot'); if (agentShot && fc.organizerLogoUrl) { agentShot.src = fc.organizerLogoUrl; agentShot.alt = fc.organizerName || 'Organizer Headshot'; }
            const secLogo = document.getElementById('footerNewSecondaryLogo'); if (secLogo && fc.secondaryLogoUrl) { secLogo.src = fc.secondaryLogoUrl; secLogo.alt = fc.secondaryLogoAlt || 'Secondary'; }
            setText('newFooterBrokerageName', fc.brokerageName || '');
            const addr = document.getElementById('newFooterAddress'); if (addr && fc.address) addr.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${fc.address}`;
            const social = document.getElementById('newFooterSocialIcons'); if (social && fc.social) { social.innerHTML = ''; const icons = { facebook:'fab fa-facebook-f', instagram:'fab fa-instagram', twitter:'fab fa-twitter', pinterest:'fab fa-pinterest-p'}; for (const k in fc.social) { const a = document.createElement('a'); a.href = fc.social[k]; a.target = '_blank'; a.rel='noopener noreferrer'; a.setAttribute('aria-label', k); a.innerHTML = `<i class="${icons[k]||'fas fa-link'}"></i>`; social.appendChild(a);} }
            setText('newFooterAgentName', fc.agentContact?.name); setText('newFooterAgentTitle', fc.agentContact?.title); const pL = document.getElementById('newFooterAgentPhoneLink'); if (pL && fc.agentContact?.phone) { pL.href = `tel:${fc.agentContact.phone.replace(/\D/g,'')}`; pL.textContent = fc.agentContact.phone; } const eL = document.getElementById('newFooterAgentEmailLink'); if (eL && fc.agentContact?.email) { eL.href = `mailto:${fc.agentContact.email}`; eL.textContent = fc.agentContact.email; }
            const year = new Date().getFullYear(); const owner = fc.copyrightOwner || fc.organizerName || '';
            setText('newFooterCopyrightText', `Â© ${year} ${owner}. All Rights Reserved.`);
            setHref('newFooterPrivacyLink', meta.privacyPolicyLink || '#');
            setText('footerTopDisclaimer', fc.footerDisclaimer || '');
        } catch(e){ console.error(e); }})();

        // Consent label
        (function populateConsent(){ const consentLabel = document.getElementById('contactConsentLabel'); if (!consentLabel) return; const brokerageName = config.footerContact?.brokerageName || 'the brokerage'; const privacyPolicyLink = config.meta?.privacyPolicyLink || '#'; consentLabel.innerHTML = `I agree to be contacted by ${brokerageName} via call, email, and text. To opt-out, you can reply 'stop' at any time or click the unsubscribe link in the emails. Message and data rates may apply. <a href="${privacyPolicyLink}" target="_blank" style="color: var(--primary); text-decoration: underline;">Privacy Policy</a>.`; })();

        // Entry form copy
        (function populateEntryForm(){ try { if (!config.entryForm) return; setText('entryFormSubtitle', config.entryForm.subtitle); setText('entryFormCount', config.entryForm.entryCountText); const subBtnTxt = submitButton?.querySelector('.button-text'); if (subBtnTxt) subBtnTxt.textContent = 'Next'; } catch(e){ console.error(e);} })();

        // Question Modal (reuse IDs/logic contracts)
        const questionModalOverlay = document.getElementById('questionModalOverlay');
        const questionModalContent = document.getElementById('questionModalContent');
        const questionModalCloseBtn = document.getElementById('questionModalCloseBtn');
        const questionModalStepsContainer = document.getElementById('question-modal-steps-container');
        let currentQuestionStepIndex = 0; let collectedQuestionAnswers = {}; let storedFullName = '', storedEmail = '', storedPhoneNumber = '';

        function hideGiveawayQuestionModal(){ if (questionModalOverlay) questionModalOverlay.classList.remove('visible'); }
        function showGiveawayQuestionModal(){ if (!questionModalOverlay || !config?.modalQuestions?.length) { const entry = document.getElementById('entry-form'); if (entry) entry.scrollIntoView({behavior:'smooth'}); return; } currentQuestionStepIndex = 0; collectedQuestionAnswers = {}; if (questionModalStepsContainer) questionModalStepsContainer.innerHTML = ''; questionModalOverlay.classList.add('visible'); displayGiveawayQuestionStep(currentQuestionStepIndex); }
        async function submitFullEntry(){ const finalPayload = { fullName: storedFullName, email: storedEmail, phoneNumber: storedPhoneNumber, giveawayName: config.giveaway?.name || 'N/A', submittedAt: new Date().toISOString(), questions: [], deploymentInfo: config.deploymentInfo || {}, ghlWebhookUrl: config.settings?.ghlWebhookUrl || '', salesGeniusAppApi: config.settings?.salesGeniusAppApi || '', followUpBossEmail: config.settings?.followUpBossEmail || '', agentEmail: config.footerContact?.email || '' }; for (const qid in collectedQuestionAnswers) { const qObj = config.modalQuestions.find(q => q.id === qid); if (qObj) { const opt = qObj.options.find(o => o.value === collectedQuestionAnswers[qid]); finalPayload.questions.push({ question: qObj.questionText, answer: opt ? opt.text : collectedQuestionAnswers[qid] }); } } const webhookUrl = 'https://n8n.salesgenius.co/webhook/giveaway'; try { const res = await fetch(webhookUrl, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(finalPayload), mode:'cors' }); if (!res.ok) { alert('There was an issue submitting your entry. Please try again.'); } else { window.location.href = 'thankyou.html'; } } catch (e) { console.error(e); alert('An error occurred while submitting your entry. Please try again.'); } }
        async function displayGiveawayQuestionStep(stepIndex){ if (!questionModalContent || !questionModalStepsContainer || !config) { console.error('Question modal structure missing'); hideGiveawayQuestionModal(); return; } questionModalStepsContainer.innerHTML = ''; if (stepIndex >= 0 && stepIndex < config.modalQuestions.length) { const q = config.modalQuestions[stepIndex]; const stepDiv = document.createElement('div'); stepDiv.classList.add('modal-step'); stepDiv.id = `giveaway-modal-step-${q.id}`; stepDiv.innerHTML = `<p class="question-text" id="giveawayModalStepTitle-${q.id}">${q.questionText}</p><div class="modal-options">${q.options.map(o => `<button type="button" class="modal-option-btn" data-step="${stepIndex}" data-question-id="${q.id}" data-answer="${o.value}">${o.text}</button>`).join('')}</div>`; stepDiv.querySelectorAll('.modal-option-btn').forEach(btn => btn.addEventListener('click', handleGiveawayAnswerClick)); questionModalStepsContainer.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('active'), 10); } else { if (questionModalStepsContainer) questionModalStepsContainer.innerHTML = '<p>Submitting your entry...</p>'; await submitFullEntry(); hideGiveawayQuestionModal(); } }
        function handleGiveawayAnswerClick(e){ try { const btn = e.currentTarget; const stepIndex = parseInt(btn.dataset.step, 10); const qid = btn.dataset.questionId; const ans = btn.dataset.answer; if (isNaN(stepIndex) || !qid || ans === undefined) return; collectedQuestionAnswers[qid] = ans; const current = btn.closest('.modal-options'); if (current) { current.querySelectorAll('.modal-option-btn').forEach(b => { b.classList.remove('selected'); b.disabled = true; }); btn.classList.add('selected'); } const activeStep = questionModalStepsContainer.querySelector('.modal-step.active'); if (activeStep) { activeStep.style.transition = 'opacity 0.3s ease-out'; activeStep.style.opacity = '0'; setTimeout(() => displayGiveawayQuestionStep(stepIndex + 1), 300); } else { setTimeout(() => displayGiveawayQuestionStep(stepIndex + 1), 300); } } catch(err){ console.error(err); hideGiveawayQuestionModal(); } }
        if (questionModalCloseBtn) questionModalCloseBtn.addEventListener('click', hideGiveawayQuestionModal);
        if (questionModalOverlay) questionModalOverlay.addEventListener('click', (evt) => { if (evt.target === questionModalOverlay) hideGiveawayQuestionModal(); });

        // Form submission â open questions modal
        const giveawayForm = document.getElementById('giveawayEntryForm');
        if (giveawayForm && submitButton) {
            giveawayForm.addEventListener('submit', (e) => {
                e.preventDefault(); if (submitButton.disabled) return;
                const fullNameValue = document.getElementById('fullName')?.value.trim();
                const emailValue = document.getElementById('email')?.value.trim();
                const phoneNumberValue = document.getElementById('phoneNumber')?.value.trim();
                if (!fullNameValue || !emailValue || !phoneNumberValue) { alert('Please enter your Name, Email Address, and Phone Number.'); return; }
                storedFullName = fullNameValue; storedEmail = emailValue; storedPhoneNumber = phoneNumberValue;
                submitButton.disabled = true; if (spinnerIcon) spinnerIcon.style.display = 'inline-block'; const btnTxt = submitButton.querySelector('.button-text'); if (btnTxt) btnTxt.style.opacity = '0.5';
                setTimeout(() => { showGiveawayQuestionModal(); submitButton.disabled = false; if (spinnerIcon) spinnerIcon.style.display = 'none'; if (btnTxt) btnTxt.style.opacity = '1'; }, 200);
            });
        }

        // CTA scroll
        const heroCtaButton = document.getElementById('heroCta'); const prizeCtaButton = document.getElementById('prizeCta');
        if (heroCtaButton) heroCtaButton.addEventListener('click', (e) => { e.preventDefault(); const target = document.getElementById('entry-form'); if (target) target.scrollIntoView({behavior:'smooth'}); });
        if (prizeCtaButton) prizeCtaButton.addEventListener('click', (e) => { e.preventDefault(); const target = document.getElementById('entry-form'); if (target) target.scrollIntoView({behavior:'smooth'}); });

        // Modal content from config
        try { if (config.giveaway) { setHTML('modalHeader', config.giveaway.successModalHeaderText); setText('modalGiveawayName', config.giveaway.name); setHTML('modalMainMessage', config.giveaway.successModalMainMessage?.replace('[GiveawayName]', config.giveaway.name || 'this giveaway')); setHTML('modalEmailPrompt', config.giveaway.successModalEmailPrompt); } } catch(e){ console.error(e); }

        // Rules & Eligibility population
        try {
            const rulesBg = document.getElementById('rulesBg');
            if (rulesBg) {
                const secondImg = config.prize?.images?.[1]?.src;
                const fallback = config.giveaway?.heroBackgroundImageUrl || config.prize?.images?.[0]?.src;
                const bgImg = secondImg || fallback;
                if (bgImg) rulesBg.style.backgroundImage = `url('${bgImg}')`;
            }
            if (config.rules) {
                // Fair selection
                const fairEl = document.getElementById('rulesFairSelection');
                if (fairEl && config.rules.fairSelectionInfo) {
                    fairEl.innerHTML = `<h3>${config.rules.fairSelectionInfo.title || ''}</h3><p>${config.rules.fairSelectionInfo.text || ''}</p>`;
                }
                // Important notice
                const noticeEl = document.getElementById('rulesImportantNotice');
                if (noticeEl && config.rules.importantNotice) {
                    noticeEl.innerHTML = `<h3>${config.rules.importantNotice.title || ''}</h3><p>${config.rules.importantNotice.text || ''}</p>`;
                }
                // FAQ
                const faqC = document.getElementById('rulesFaqList');
                if (faqC && Array.isArray(config.rules.faq)) {
                    faqC.innerHTML = '';
                    config.rules.faq.forEach(it => {
                        const li = document.createElement('li');
                        li.className = 'faq-item open';
                        li.innerHTML = `<div class=\"faq-question\">${it.q}<i class=\"fas fa-chevron-down\"></i></div><div class=\"faq-answer\">${it.a}</div>`;
                        faqC.appendChild(li);
                    });
                    document.querySelectorAll('#rulesFaqList .faq-item .faq-question').forEach(q =>
                        q.addEventListener('click', () => q.parentElement.classList.toggle('open'))
                    );
                }
                // Tips
                const tipsSection = document.getElementById('rulesTipsSection');
                const tipsC = document.getElementById('rulesTipsList');
                if (tipsSection) {
                    if (config.rules.showTipsSection === false) {
                        tipsSection.style.display = 'none';
                    } else {
                        tipsSection.style.display = 'block';
                    }
                }
                if (tipsC && Array.isArray(config.rules.tips)) {
                    tipsC.innerHTML = '';
                    const oN = config.footerContact?.organizerName || 'organizer';
                    config.rules.tips.forEach(t => {
                        const li = document.createElement('li');
                        li.innerHTML = `<i class=\"fas fa-check-circle\"></i> <span>${t.replace('[Organizer Name]', oN)}</span>`;
                        tipsC.appendChild(li);
                    });
                }
            }
        } catch (e) { console.error('Err Rules:', e); }

        // Rules ticker uses same message
        const rulesTicker = document.getElementById('rulesTickerTrack');
        if (rulesTicker) {
            const parts = [];
            if (config.giveaway?.name) parts.push(config.giveaway.name);
            if (config.prize?.value) parts.push((config.prize.value + ' Value').trim());
            if (config.prize?.ctaButtonText) parts.push(config.prize.ctaButtonText);
            const msg = parts.filter(Boolean).join(' â¢ ');
            rulesTicker.textContent = `${msg} â¢ ${msg} â¢ ${msg} â¢ ${msg}`;
        }
    });
    </script>
</body>
</html>


